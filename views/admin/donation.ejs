<main>
	<%- include('../partials/adminSidebar') %>
	
	<div id="main-wrapper">
		
		<div class="bg-white shadow-sm p-3">
			<span class="me-3" id="sidebar-toggler-btn"><i class="fas fa-bars"></i></span>
			<h5 class="m-0 color-theme d-inline-block">Donation</h5>
		</div>
		
		<div class="border m-4 my-3 p-4 bg-white rounded-2 shadow-sm">
			<div class="mb-2">
				<span>Donor Name:</span>
				<span><%= donation.donor.firstName + " " + donation.donor.lastName %></span>
			</div>
<!--Displays the full name of the donor-->
			
			<div class="mb-2">
				<span>Food type:</span>
				<span><%= donation.foodType %></span>
			</div>
			
			<div class="mb-2">
				<span>Quantity:</span>
				<span><%= donation.quantity %></span>
			</div>
<!--Shows the type of food being donated and the quantity.-->
			
			<div class="mb-2">
				<span>Time of cooking:</span>
				<span><%= donation.cookingTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short"}) %></span>
			</div>
<!--Uses toLocaleString to format the cooking time in the desired locale and format.-->
			
			<div class="mb-2">
				<span>Address to collect:</span>
				<span><%= donation.address %></span>
			</div>
			
			<div class="mb-2">
				<span>Phone:</span>
				<span><%= donation.phone %></span>
			</div>
<!--Displays the address where the donation should be collected and the donor's contact number.-->
			
			<% if(donation.donorToAdminMsg != "") { %>
				<div class="mb-2">
					<span>Message from Donor:</span>
					<div class="ms-3"><%= donation.donorToAdminMsg %></div>
				</div>
			<% } %>
<!--If the donor has left a message, it is displayed in this section. The condition ensures the message is shown only if it's present.-->
				
			<div class="mb-2">
				<span>Status:</span>
				<span class="fw-bold text-<%= donation.status %>"><%= donation.status %></span>
			</div>
<!--Shows the status of the donation (e.g., pending, accepted, assigned, or collected). The status text is styled dynamically using Bootstrap classes based on the status value.-->
			<% if(donation.status == "assigned") { %>
				<div class="mb-2">
					<span>Agent assigned:</span>
					<span><%= donation.agent.firstName + " "  + donation.agent.lastName %></span>
				</div>
			<% } %>
<!--Agent Assigned: If the donation has been assigned to an agent, the agent's name is displayed:-->
			
			<% if(donation.status == "assigned" && donation.adminToAgentMsg != "") { %>
				<div class="mb-2">
					<span>Your message to Agent:</span>
					<div class="ms-3"><%= donation.adminToAgentMsg %></div>
				</div>
			<% } %>
<!--Message to Agent: If there's a message from the admin to the agent, it is shown:-->
			
			<% if(donation.status == "collected") { %>
				<div class="mb-2">
					<span>Collection time:</span>
					<span><%= donation.collectionTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short"}) %></span>
				</div>
			<% } %>
<!--Collection Time: If the donation has been collected, the collection time is displayed:-->
			
			
			<div class="mt-4">
				<% if(donation.status == "pending") { %>
					<a href="/admin/donation/accept/<%= donation._id %>" class="btn">Accept</a>
					<a href="/admin/donation/reject/<%= donation._id %>" class="btn btn-danger">Reject</a>
				<% } else if(donation.status == "accepted") { %>
					<a href="/admin/donation/assign/<%= donation._id %>" class="btn">Assign agent</a>
				<% } %>
			</div>
			
		</div>
		
	</div>
</main>
